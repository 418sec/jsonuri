{"version":3,"sources":["jsonuri.js"],"names":["global","factory","exports","module","define","amd","JsonUri","this","noop","isInteger","num","Number","isObject","val","Object","prototype","toString","call","isArray","objectForeach","obj","callback","_break","isBreak","_iterator","keys","_isArray","Array","_i2","Symbol","iterator","_ref","length","next","done","value","prop","normalizePath","_len","arguments","path","_key","arrPro","concat","apply","join","split","combingPathKey","walk","_walk","key","raw","_ref2","_gBreak","pop","walkMap","indexOf","Error","push","console","log","descentionFn","ascentionFn","undefined","filter","item","slice","_i","splice","_i3","getType","String","__class2types","data","cur","i","_nextKey","_curType","get","set","rm","tmp","swap","pathA","pathB","_a","mv","direction","aParent","bParent","aIndex","bIndex","error","insert","_targetIndex","up","gap","parent","index","target_index","down","isAfter","target","min","max","toLowerCase","Math"],"mappings":"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","file":"jsonuri.min.js","sourcesContent":["/*!\n * JsonUri.js v1.5.14\n * (c) 2018 Linkjun <pk.link@163.com> https://jsonuri.com\n * Released under the MIT License.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.JsonUri = global.JsonUri || {})));\n}(this, function (exports) { 'use strict';\n\n  function noop() {}\n\n  function isInteger(num) {\n    return Number.isInteger(num);\n  }\n\n  function isObject(val) {\n    return Object.prototype.toString.call(val) === '[object Object]';\n  }\n\n  function isArray(val) {\n    return Object.prototype.toString.call(val) === '[object Array]';\n  }\n\n  function objectForeach(obj, callback) {\n    var isBreak = false;\n    function _break() {\n      isBreak = true;\n    }\n\n    for (var _iterator = Object.keys(obj), _isArray = Array.isArray(_iterator), _i2 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i2 >= _iterator.length) break;\n        _ref = _iterator[_i2++];\n      } else {\n        _i2 = _iterator.next();\n        if (_i2.done) break;\n        _ref = _i2.value;\n      }\n\n      var prop = _ref;\n\n      if (isBreak) break;\n      callback(obj[prop], prop, obj, { _break: _break });\n    }\n  }\n\n  var arrPro = Array.prototype;\n\n  function normalizePath() {\n    for (var _len = arguments.length, path = Array(_len), _key = 0; _key < _len; _key++) {\n      path[_key] = arguments[_key];\n    }\n\n    // path = isArray(path) ? path : [path]\n    path = arrPro.concat.apply(arrPro, path).join('/').split('/');\n    path = ['/', combingPathKey(path).join('/')].join('');\n    if (path !== '/') {\n      path += '/';\n    }\n    return path;\n  }\n\n  /**\n   * [walk description] 遍历一个对象, 提供入栈和出栈两个回调, 操作原对象\n   * @param  {object} obj          [description]\n   * @param  {[type]} descentionFn [description]\n   * @param  {[type]} ascentionFn  [description]\n   * @return {[type]}              [description]\n   */\n\n  function walk() {\n    var obj = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var descentionFn = arguments.length <= 1 || arguments[1] === undefined ? noop : arguments[1];\n    var ascentionFn = arguments.length <= 2 || arguments[2] === undefined ? noop : arguments[2];\n\n    var walkMap = [];\n    var path = [];\n    function _walk(obj) {\n      objectForeach(obj, function (val, key, raw, _ref2) {\n        var _break = _ref2._break;\n\n        var isBreak = false;\n        if (val !== null && typeof val === 'object') {\n          if (walkMap.indexOf(val) > -1) {\n            throw new Error('obj is not a finite set');\n          }\n          walkMap.push(val);\n        }\n\n        function _gBreak() {\n          _break();\n          isBreak = true;\n          if (isArray(raw)) {\n            path.pop();\n          }\n        }\n\n        if (val === raw) {\n          console.log('Circular-reference: ' + normalizePath(path));\n          _break(); // break 只会跳出当前一层循环\n          return;\n        }\n\n        path.push(key);\n        descentionFn(val, key, raw, { path: normalizePath(path), _break: _gBreak });\n        path.pop();\n        if (val instanceof Object) {\n          path.push(key);\n          if (isBreak) return;\n          _walk(val);\n          path.pop();\n          ascentionFn(val, key, raw, { path: normalizePath(path), _break: _gBreak });\n        }\n      });\n      return obj;\n    }\n\n    return _walk(obj);\n  }\n\n  function indexOf(path) {\n    return path.split('/').filter(function (item) {\n      return item;\n    }).slice(-1)[0] - 0;\n  }\n\n  /**\n   * Combing path keys\n   * @param  {Array} keys  ['','menu','id','','.']\n   * @return {Array}       ['menu','id']\n   */\n\n  function combingPathKey(keys) {\n\n    // {empty}\n    while (~keys.indexOf('')) {\n      var _i = keys.indexOf('');\n      keys.splice(_i, 1);\n    }\n\n    // .\n    while (~keys.indexOf('.')) {\n      var _i = keys.indexOf('.');\n      keys.splice(_i, 1);\n    }\n\n    // ..\n    while (~keys.indexOf('..')) {\n      var _i3 = keys.indexOf('..');\n      keys[_i3] = keys[_i3 - 1] = null;\n      delete keys[_i3];\n      delete keys[_i3 - 1];\n      keys.splice(_i3, 1);\n      keys.splice(_i3 - 1, 1);\n    }\n\n    return keys;\n  }\n\n  /**\n   * getType\n   * @type {Object}\n   * @return {String} 返回类型\n   */\n  var __class2types = {};\n  objectForeach(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function (item, index) {\n    __class2types['[object ' + item + ']'] = item.toLowerCase();\n  });\n\n  function getType(obj) {\n    if (obj == null) return String(obj);\n    return typeof obj === 'object' || typeof obj === 'function' ? __class2types[__class2types.toString.call(obj)] || 'object' : typeof obj;\n  }\n\n  /**\n   * JsonUri\n   * @author Linkjun\n   * @param {Object | Array}    data  {k:1,s:[..]}\n   * @param {String}            path  '/s/0/'\n   * @param {Any}               value [0,{s:0},2,3,4]\n   */\n  function JsonUri(data, path, value) {\n    //Data must be Object.\n    if (!(data instanceof Object)) return;\n\n    //Path must be valid.\n    if (!path) return data;\n\n    //Combing Path Key.\n    var keys = combingPathKey(String(path).split('/'));\n    //Initialize data to the pointer.\n    var cur = data;\n\n    for (var i = 0; i < keys.length; i++) {\n      //Key must be valid.\n      if (!keys[i]) continue;\n\n      if (i === keys.length - 1) {\n        if (value != undefined) {\n\n          //set value.\n          cur[keys[i]] = value;\n        } else if (value === null) {\n\n          //delete value in the object.\n          if (isObject(cur)) {\n            cur[keys[i]] = null;\n            delete cur[keys[i]];\n          }\n\n          //delete value in the array.\n          if (isArray(cur)) {\n            cur[keys[i]] = null;\n            cur.splice(keys[i], 1);\n          }\n        }\n      } else if (value) {\n\n        //if set value\n        var _nextKey = keys[i + 1];\n\n        //curData is undefined.\n        if (!cur[keys[i]]) {\n\n          //create data container.\n          var _curType = _nextKey * 0 === 0 ? 'Array' : 'Object';\n          if (_curType === 'Array') {\n            cur[keys[i]] = [];\n          } else if (_curType === 'Object') {\n            cur[keys[i]] = {};\n          }\n        }\n      } else {\n        if (cur[keys[i]] === undefined) {\n          //Data path is undefined and return.\n          return undefined;\n        } else if (cur[keys[i]] === null) {\n          return null;\n        }\n      }\n\n      cur = cur[keys[i]];\n    };\n\n    return cur;\n  }\n\n  /**\n   * Get\n   * @param  {Object} data  typeof Object or Array.\n   * @param  {String} path  ex: '/menu/nav/list'.\n   * @param {[type]}        return value.\n   */\n  function get(data, path) {\n    return JsonUri(data, path);\n  }\n\n  /**\n   * Set\n   * @param  {Object} data  typeof Object or Array.\n   * @param  {String} path  ex: '/menu/nav/list'.\n   * @param  {Any}    value ex: {}.\n   * @param {[type]}        return data this.\n   */\n  function set(data, path, value) {\n    JsonUri(data, path, value);\n    return data;\n  }\n\n  /**\n   * Remove\n   * @param  {Object} data  typeof Object or Array.\n   * @param  {String} path  ex: '/menu/nav/list'.\n   * @return {Any}          The deleted value.\n   */\n  function rm(data, path) {\n    var tmp = JsonUri(data, path);\n    set(data, path, null);\n    return tmp;\n  }\n\n  /**\n   * Swap\n   * @param  {Object} data    data type can be object or array.\n   * @param  {String} pathA   ex: '/menu/nav/list/0'.\n   * @param  {String} pathB   ex: '/menu/nav/list/2'.\n   * @return {Object}         return data this.\n   * @description  `pathA` the data swap `pathB`.\n   */\n  function swap(data, pathA, pathB) {\n    var _a = JsonUri(data, pathA);\n    var _b = JsonUri(data, pathB);\n\n    set(data, pathA, _b);\n    set(data, pathB, _a);\n    return data;\n  }\n\n  /**\n   * Move\n   * @param  {Object} data      data type can be object or array.\n   * @param  {String} pathA     ex: '/menu/nav/list/0'.\n   * @param  {String} pathB     ex: '/menu/nav/list/2'.\n   * @param  {String} sequence  ex: 'before', default 'after'.\n   * @description Move data in the array.\n   */\n  function mv(data, pathA, pathB) {\n    var direction = arguments.length <= 3 || arguments[3] === undefined ? 'after' : arguments[3];\n\n    var aParent = get(data, pathA + '/../');\n    var bParent = get(data, pathB + '/../');\n    var _a = get(data, pathA);\n    var _b = get(data, pathB);\n    var aIndex = indexOf(pathA);\n    var bIndex = indexOf(pathB);\n\n    if (getType(aParent) !== 'array') {\n      console.error(pathA + ' 路径的父级不是数组类型');\n      return;\n    }\n    if (getType(bParent) !== 'array') {\n      console.error(pathB + ' 路径的父级不是数组类型');\n      return;\n    }\n\n    //不同父节点也要考虑移除A后B的指针会变更，例如：/3/ mvto /6/5/\n    if (aParent !== bParent) {\n      //1、父级别移动到子级中：先插后删\n      //从路径判断pathB是否为pathA的父级\n      if (normalizePath(pathB, '../').indexOf(normalizePath(pathA, '../')) === 0) {\n        //先插后删\n        insert(data, pathB, _a, direction);\n        rm(data, pathA);\n        return;\n      }\n      //2、子级别移动到父级别：先删后插\n      rm(data, pathA);\n      insert(data, pathB, _a, direction);\n      return;\n    }\n\n    //同一数组内移动\n\n    //移动位置相同直接退出\n    if (aIndex === bIndex) return;\n\n    //获取目标_index\n    var _targetIndex = bIndex += direction === 'before' ? -1 : 0;\n\n    //目标指针依旧相同退出\n    if (aIndex === _targetIndex) return;\n\n    //目标指针大于被移动指针\n    if (_targetIndex > aIndex) {\n      //先插后删\n      insert(data, pathB, _a, direction);\n      rm(data, pathA);\n      return;\n    }\n\n    //先删后插\n    rm(data, pathA);\n    insert(data, pathB, _a, direction);\n  }\n\n  /**\n   * Up\n   * @param  {Object} data      data type can be object or array.\n   * @param  {String} pathA     ex: '/menu/nav/list/0'.\n   * @description Move up data in the array.\n   */\n  function up(data, path) {\n    var gap = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n    var parent = get(data, path + '/../');\n    var index = indexOf(path);\n    var target_index = index - gap;\n    var pathB = normalizePath(path, '/../' + target_index + '/');\n\n    if (!isArray(parent)) {\n      console.error(path + ' 目标必须为数组类型');\n      return;\n    }\n    //移动溢出\n    if (index <= 0 || index >= parent.length) {\n      return;\n    }\n\n    mv(data, path, pathB, 'before');\n  }\n\n  /**\n   * Down\n   * @param  {Object} data      data type can be object or array.\n   * @param  {String} pathA     ex: '/menu/nav/list/0'.\n   * @description Move up data in the array.\n   */\n  function down(data, path) {\n    var gap = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n    var parent = get(data, path + '/../');\n    var index = indexOf(path);\n    var target_index = index + gap;\n    var pathB = normalizePath(path, '/../' + target_index + '/');\n\n    if (!isArray(parent)) {\n      console.error('操作的不是数组');\n      return;\n    }\n    //移动溢出\n    if (index < 0 || index >= parent.length) {\n      return;\n    }\n\n    mv(data, path, pathB, 'after');\n  }\n\n  /**\n   * 在 path 之前 或者之后插入一个数据, 如果不是数组,控制台报错\n   * @param  {[type]} data      [description]\n   * @param  {[type]} path      [description]\n   * @param  {String} direction [description]\n   * @return {[type]}           [description]\n   */\n  var max = Math.max;\n  var min = Math.min;\n\n  function insert(data, path, value) {\n    var direction = arguments.length <= 3 || arguments[3] === undefined ? 'after' : arguments[3];\n\n    var parent = get(data, path + '/../');\n    var index = path.split('/').filter(function (item) {\n      return item;\n    }).slice(-1)[0] - 0;\n\n    if (!isInteger(index)) {\n      console.error(path + ' 路径末尾必须为数字');\n      return;\n    }\n\n    if (!isArray(parent)) {\n      console.error(path + ' 要插入的父级类型不是数组');\n      return;\n    }\n\n    var isAfter = direction === 'after';\n    var target = isAfter ? index + 1 : index;\n    target = min(parent.length, target);\n    target = max(0, target);\n    parent.splice(target, 0, value);\n    return data;\n  }\n\n  var index = { get: get, set: set, rm: rm, swap: swap, mv: mv, up: up, down: down, insert: insert, walk: walk, normalizePath: normalizePath };\n\n  exports['default'] = index;\n  exports.get = get;\n  exports.set = set;\n  exports.rm = rm;\n  exports.swap = swap;\n  exports.mv = mv;\n  exports.up = up;\n  exports.down = down;\n  exports.insert = insert;\n  exports.walk = walk;\n  exports.normalizePath = normalizePath;\n\n}));"]}